{% extends "base.html"%}

{% block content %}
<h3>Edit Issue</h3>
<div class="row">
    <form action="{{ url_for('update_issue', issue_id=issue['issueId']) }}" method="POST" class="col s12">
        <div class="row">
            <div class="input-field col s6">
                <i class="material-icons prefix">person</i>
                <input id="issue_added_by" name="issue_added_by" type="text" class="validate" value="{{issue['addedBy']}}" disabled>
                <label for="icon_prefix">Added By</label>
            </div>
            <div class="input-field col s6">
                <i class="material-icons prefix">today</i>
                <input id="date_added" name="date_added" type="text" value="{{issue['dateAdded']}}" disabled>
                <label for="icon_prefix">Date Added</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s6">
                <i class="material-icons prefix cat-icon">{{issue['catIcon']}}</i>
                <select name="cat_name" class="cat-sel">
                    <option value="" disabled selected>Choose Category</option>
                        {% for cat in cats %}
                            {% if cat['catId'] == issue['catId'] %}
                                <option value="{{cat['catId']~'|'~cat['catIcon']}}" selected >{{cat['catName']}}</option>
                            {% else %}
                                <option value="{{cat['catId']~'|'~cat['catIcon']}}">{{cat['catName']}}</option>
                            {% endif %}
                        {% endfor %}
                </select>
                <label>Issue Category</label>
            </div>
            <div class="input-field col s6">
                <i class="material-icons prefix">assignment</i>
                <input id="issue_subj" name="issue_subj" type="text" class="validate" value="{{issue['issueSubj']}}">
                <label for="issue_subj">Issue Subject</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s6">
                <i class="material-icons prefix">subject</i>
                <textarea name="issue_desc" id="issue_desc" class="materialize-textarea">{{issue['issueDesc']}}</textarea>
                <label for="issue_desc">Issue Description</label>
            </div>
        </div>
        <div class="row">
            <div class="switch">
                <label>
                    {% if issue['urgent'] %}
                        <input id="urgent" name="urgent" type="checkbox" checked disabled>
                    {% else %}
                        <input id="urgent" name="urgent" type="checkbox" disabled>
                    {% endif %}
                    <span class="lever"></span>
                    {% if issue['urgent'] %}
                        <span class="urgent">Is Urgent</span>
                    {% else %}
                        <span class="not-urgent">Not Urgent</span>
                    {% endif %}
                </label>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="switch">
                <label>
                    {% if issue['resolved'] %}
                        <input id="resolved" name="resolved" type="checkbox" checked>
                    {% else %}
                        <input id="resolved" name="resolved" type="checkbox">
                    {% endif %}
                    <span class="lever"></span>
                    {% if issue['resolved'] %}
                        Resolved/Answered
                    {% else %}
                        Not Resolved/Not Answered
                    {% endif %}
                </label>
            </div>
        </div>
        <div class="row">
            <button class="btn waves-effect waves-light" type="submit" name="action">Save Issue
                <i class="material-icons right">playlist_add</i>
             </button>
        </div>
    </form>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
    $(function() {
    });
</script>

{% endblock %}